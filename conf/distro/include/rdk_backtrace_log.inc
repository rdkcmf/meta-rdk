# backtrace logging is enabled
# we set this to "y" or "n" and use it as a conditional later

LOG_BACKTRACE = "${@bb.utils.contains('DISTRO_FEATURES', 'logbacktrace', 'y', 'n', d)}"

BACKTRACE_LDFLAGS ?= ""
BACKTRACE_DEPENDS ?= ""

BACKTRACE_DEPENDS_pn-iarmbus = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-iarmmgrs = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-rmfstreamer = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-rmfpodmgr = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-tr69hostif = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-wpeframework = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-wpa-supplicant = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-hdmicec = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-devicesettings = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-trmmgr = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-wsproxy = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-qtapp = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-ledmgr = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-audiocapturemgr = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-audioserver = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-audioserver-soc = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-runpod = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-runsnmp = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-vodclient-app = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-nlmon = " breakpad-wrapper"
BACKTRACE_DEPENDS_pn-pwr-state-monitor = " breakpad-wrapper"

BACKTRACE_LDFLAGS_pn-iarmbus = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-iarmmgrs = " -lbreakpadwrapper "
BACKTRACE_LDFLAGS_pn-rmfstreamer = " -lbreakpadwrapper "
BACKTRACE_LDFLAGS_pn-rmfpodmgr = " -lbreakpadwrapper "
BACKTRACE_LDFLAGS_pn-tr69hostif = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-rdkservices = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-webkitbrowser-plugin = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-cobalt-plugin = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-browserlauncher = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-wpeframework-plugin-netflix = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-wpa-supplicant = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-hdmicec = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-devicesettings = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-trmmgr = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-wsproxy = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-qtapp = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-ledmgr = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-audiocapturemgr = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-audioserver = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-audioserver-soc= " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-runpod = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-runsnmp = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-vodclient-app = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-nlmon = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "
BACKTRACE_LDFLAGS_pn-pwr-state-monitor = " -Wl,--no-as-needed -lbreakpadwrapper -Wl,--as-needed "

BACKTRACE_DEPENDS_pn-busybox = " crashlog"
BACKTRACE_DEPENDS_pn-lighttpd = " crashlog"

BACKTRACE_LDFLAGS_pn-busybox = " -Wl,--no-as-needed -lcrashlog -Wl,--as-needed"
BACKTRACE_LDFLAGS_pn-lighttpd = " -Wl,--no-as-needed -lcrashlog -Wl,--as-needed"


DEPENDS_append = " ${@LOG_BACKTRACE == "y" and BACKTRACE_DEPENDS or ""}"
LDFLAGS_append = " ${@LOG_BACKTRACE == "y" and BACKTRACE_LDFLAGS or ""}"
